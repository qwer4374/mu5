# 🤖 Advanced Telegram Bot v2.0.0

بوت تليجرام متطور ومتكامل مع ميزات شاملة لإدارة الملفات والمستخدمين والتحليلات.

## 🌟 الميزات الرئيسية

### 📥 إدارة التحميلات المتقدمة
- تحميل الملفات من الروابط مع تتبع التقدم
- دعم أنواع ملفات متعددة (فيديو، صوت، صور، مستندات)
- استئناف التحميل في حالة الانقطاع
- ضغط وتحسين الملفات تلقائياً
- نظام تخزين مؤقت ذكي

### 👥 إدارة المستخدمين الشاملة
- تسجيل المستخدمين التلقائي
- نظام صلاحيات متدرج (مالك، مدير، مستخدم)
- إحصائيات مفصلة لكل مستخدم
- نظام حظر وإلغاء حظر
- تتبع النشاط والاستخدام

### 📊 التحليلات والإحصائيات
- تحليلات شاملة للاستخدام
- تقارير مفصلة للمديرين
- رسوم بيانية وإحصائيات بصرية
- تتبع الأداء والاستجابة
- تصدير البيانات بصيغ متعددة

### 🔒 الأمان والحماية
- نظام اشتراك إجباري في القنوات
- حماية من الرسائل المزعجة
- تشفير البيانات الحساسة
- نسخ احتياطية تلقائية
- سجلات أمان مفصلة

### ⏰ الجدولة والأتمتة
- جدولة المهام التلقائية
- إرسال رسائل مجدولة
- نسخ احتياطية دورية
- تنظيف البيانات القديمة
- إشعارات تلقائية

### 🎨 واجهة المستخدم التفاعلية
- قوائم تفاعلية بأزرار inline
- واجهة عربية كاملة
- دعم متعدد اللغات
- تخصيص الإعدادات الشخصية
- تجربة مستخدم محسنة

## 🛠️ التثبيت والإعداد

### متطلبات النظام
- Windows 11
- Python 3.8 أو أحدث
- PowerShell 5.1 أو أحدث
- اتصال بالإنترنت
- 2 جيجابايت مساحة فارغة

### التثبيت التلقائي
1. قم بتحميل المشروع
2. افتح PowerShell كمدير
3. انتقل إلى مجلد المشروع
4. شغل الأمر:
```powershell
.\install.ps1
```

### التثبيت اليدوي
1. تثبيت Python من [python.org](https://python.org)
2. تثبيت VS Code من [code.visualstudio.com](https://code.visualstudio.com)
3. تثبيت المتطلبات:
```powershell
pip install -r requirements.txt
```

## 🚀 التشغيل

### تشغيل سريع
```powershell
.\run_bot.ps1
```

### تشغيل مع خيارات
```powershell
# تثبيت المتطلبات
.\run_bot.ps1 -Install

# تحديث المتطلبات
.\run_bot.ps1 -Update

# تشغيل في وضع التطوير
.\run_bot.ps1 -Debug

# تنظيف الملفات المؤقتة
.\run_bot.ps1 -Clean
```

### تشغيل من VS Code
1. افتح المشروع في VS Code
2. اضغط `F5` أو استخدم قائمة Run
3. اختر "🤖 Run Bot" من قائمة التشغيل

## ⚙️ التكوين

### إعدادات البوت الأساسية
```python
# في ملف config.py
TELEGRAM_BOT_TOKEN = "1862186312:AAEgq9cIQDbf2MitTjDMjYKPgdD9eGCPSlI"
OWNER_ID = 697852646
ADMIN_USER_IDS = [697852646]
```

### إعدادات قاعدة البيانات
```python
DATABASE_URL = "sqlite:///advanced_telegram_bot.db"
```

### إعدادات التحميل
```python
DOWNLOAD_DIRECTORY = "data/downloads"
MAX_DOWNLOAD_SIZE = 50 * 1024 * 1024  # 50MB
ALLOWED_FORMATS = ['mp4', 'mp3', 'pdf', 'jpg', 'png', 'gif', 'zip', 'rar']
```

## 📋 الأوامر المتاحة

### أوامر المستخدمين
- `/start` - بدء البوت وعرض القائمة الرئيسية
- `/help` - عرض المساعدة والأوامر
- `/profile` - عرض الملف الشخصي
- `/stats` - عرض الإحصائيات الشخصية
- `/settings` - إعدادات المستخدم
- `/downloads` - سجل التحميلات

### أوامر المديرين
- `/admin` - لوحة الإدارة
- `/users` - إدارة المستخدمين
- `/broadcast` - إرسال رسالة جماعية
- `/ban` - حظر مستخدم
- `/unban` - إلغاء حظر مستخدم
- `/backup` - إنشاء نسخة احتياطية
- `/maintenance` - وضع الصيانة

## 🏗️ هيكل المشروع

```
advanced_telegram_bot/
├── main.py                 # الملف الرئيسي
├── config.py              # إعدادات البوت
├── requirements.txt       # متطلبات Python
├── run_bot.ps1           # ملف تشغيل PowerShell
├── install.ps1           # ملف التثبيت
├── README.md             # هذا الملف
├── src/                  # الكود المصدري
│   ├── core/            # الوحدات الأساسية
│   │   ├── database.py  # إدارة قاعدة البيانات
│   │   └── bot_manager.py # مدير البوت
│   ├── handlers/        # معالجات الأوامر
│   │   ├── start.py     # معالج البداية
│   │   ├── download.py  # معالج التحميل
│   │   ├── admin.py     # معالج الإدارة
│   │   └── ...
│   ├── utils/           # أدوات مساعدة
│   │   ├── logger.py    # نظام السجلات
│   │   └── ...
│   ├── services/        # الخدمات
│   └── middleware/      # الوسطاء
├── data/                # بيانات البوت
│   ├── logs/           # ملفات السجلات
│   ├── downloads/      # الملفات المحملة
│   ├── backups/        # النسخ الاحتياطية
│   └── cache/          # الملفات المؤقتة
├── tests/              # اختبارات الكود
├── docs/               # التوثيق
└── .vscode/            # إعدادات VS Code
    ├── launch.json     # إعدادات التشغيل
    ├── settings.json   # إعدادات المحرر
    └── tasks.json      # المهام
```

## 🔧 التطوير والمساهمة

### إعداد بيئة التطوير
1. استنسخ المشروع
2. ثبت المتطلبات: `pip install -r requirements.txt`
3. افتح في VS Code
4. استخدم إعدادات التطوير المُعدة مسبقاً

### تشغيل الاختبارات
```powershell
# تشغيل جميع الاختبارات
python -m pytest tests/ -v

# تشغيل اختبارات محددة
python -m pytest tests/test_database.py -v
```

### تنسيق الكود
```powershell
# تنسيق الكود باستخدام Black
python -m black . --line-length=88

# فحص الكود باستخدام Pylint
pylint src/
```

## 📊 قاعدة البيانات

### الجداول الرئيسية
- `users` - بيانات المستخدمين
- `downloads` - سجل التحميلات
- `user_analytics` - تحليلات المستخدمين
- `subscriptions` - الاشتراكات
- `scheduled_tasks` - المهام المجدولة
- `bot_settings` - إعدادات البوت
- `file_cache` - ذاكرة التخزين المؤقت

### النسخ الاحتياطية
- نسخ احتياطية تلقائية كل 24 ساعة
- حفظ في مجلد `data/backups/`
- ضغط وتشفير البيانات
- الاحتفاظ بـ 7 نسخ احتياطية

## 🔒 الأمان

### حماية البيانات
- تشفير كلمات المرور والبيانات الحساسة
- حماية من هجمات SQL Injection
- تحديد معدل الطلبات (Rate Limiting)
- سجلات أمان مفصلة

### الصلاحيات
- مالك البوت: صلاحيات كاملة
- المديرين: إدارة المستخدمين والإعدادات
- المستخدمين: الميزات الأساسية

## 📈 الأداء والتحسين

### تحسينات الأداء
- استخدام قاعدة بيانات SQLite محسنة
- تخزين مؤقت ذكي للملفات
- معالجة غير متزامنة للطلبات
- ضغط البيانات والملفات

### المراقبة
- مراقبة استخدام الذاكرة والمعالج
- تتبع أوقات الاستجابة
- إحصائيات الأداء في الوقت الفعلي
- تنبيهات عند حدوث مشاكل

## 🌐 الدعم متعدد اللغات

### اللغات المدعومة
- العربية (افتراضي)
- الإنجليزية
- إمكانية إضافة لغات أخرى

### إضافة لغة جديدة
1. أنشئ ملف ترجمة في `src/utils/lang/`
2. أضف الترجمات المطلوبة
3. حدث إعدادات اللغة في `config.py`

## 🚨 استكشاف الأخطاء

### مشاكل شائعة وحلولها

#### البوت لا يستجيب
- تحقق من صحة التوكن
- تأكد من اتصال الإنترنت
- راجع ملفات السجلات في `data/logs/`

#### فشل التحميل
- تحقق من صحة الرابط
- تأكد من وجود مساحة كافية
- راجع الصيغ المدعومة

#### مشاكل قاعدة البيانات
- تحقق من صلاحيات الكتابة
- شغل أداة إصلاح قاعدة البيانات
- استعد من النسخة الاحتياطية

### ملفات السجلات
- `data/logs/bot.log` - سجل عام
- `data/logs/errors.log` - سجل الأخطاء
- `data/logs/downloads.log` - سجل التحميلات

## 📞 الدعم والتواصل

### معلومات البوت
- **التوكن**: `1862186312:AAEgq9cIQDbf2MitTjDMjYKPgdD9eGCPSlI`
- **معرف المالك**: `697852646`
- **الإصدار**: `2.0.0`

### الحصول على المساعدة
- استخدم الأمر `/help` في البوت
- راجع ملفات التوثيق في مجلد `docs/`
- تحقق من ملفات السجلات للأخطاء

## 📄 الترخيص

هذا المشروع مرخص تحت رخصة MIT. راجع ملف `LICENSE` للتفاصيل.

## 🔄 سجل التحديثات

### الإصدار 2.0.0
- إعادة كتابة كاملة للكود
- واجهة مستخدم محسنة
- ميزات أمان متقدمة
- نظام تحليلات شامل
- دعم VS Code كامل
- تحسينات الأداء

---

**تم تطوير هذا البوت بعناية فائقة ليوفر تجربة استخدام متميزة ومتكاملة. نتمنى لك استخداماً ممتعاً ومفيداً! 🚀**

## ميزات التحميل المتقدمة (2024)

- يدعم التحميل من يوتيوب (فيديو/صوت/قائمة تشغيل مع تصفح واختيار وتحميل الكل أو عنصر معين)
- يدعم التحميل من انستغرام، فيسبوك، تيك توك، تويتر، بنترست (فيديو أو صوت)
- اختيار الجودة (عالي/متوسط/منخفض) قبل التحميل
- عرض قائمة التشغيل داخل البوت مع أزرار تصفح واختيار
- دعم تحميل الملفات الكبيرة بكفاءة وسرعة
- إظهار تقدم التحميل للمستخدم
- مشاركة الملف مباشرة مع مستخدمين آخرين عبر البوت
- جدولة التحميلات إذا كان هناك عدة طلبات
- إرسال إشعار عند انتهاء التحميل أو في حال وجود خطأ
- تنظيف تلقائي للملفات المؤقتة بعد الإرسال
- دعم استئناف التحميل في حال انقطع الاتصال
- سجل التحميلات للمستخدم

